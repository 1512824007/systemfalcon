
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/static/public/plugin/Chosen/chosen.min.css">
    <link rel="stylesheet" href="/static/public/plugin/bootstrap-3.3.7/css/bootstrap.css">
    <link rel="stylesheet" href="/static/public/plugin/bootstrap-3.3.7/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="/static/public/css/R.css">
    <link rel="stylesheet" type="text/css" href="/static/public/plugin/bootstrap-3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/static/font-awesome/css/font-awesome.min.css" />
    <link rel="shortcut icon" href="/static/img/favicon.ico">
    <script type="text/javascript" src="/static/js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="/static/public/plugin/bootstrap-3.3.7/js/bootstrap.min.js"></script>

    <!-- you need to include the shieldui css and js assets in order for the charts to work -->
    <link href="/static/css/bootstrap-datetimepicker.css" rel="stylesheet"/>
    <script type="text/javascript" src="/static/js/shieldui-all.min.js"></script>
    <script type="text/javascript" src="/static/js/gridData.js"></script>
    <script src="/static/js/echarts-all-3.js"></script>
    <script src="/static/js/china.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap-datetimepicker.js" charset="UTF-8"></script>
    <script type="text/javascript" src="/static/js/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>

    <script src="/static/js/underscore.js"></script>
    <script src="/static/Hchartscode/highcharts.js"></script>
    <script src="/static/Hchartscode/modules/data.js"></script>
    <script src="/static/public/js/R.js"></script>
    <title>监控系统</title>
</head>
<body>
<div class="monitorBox">
    <nav class="topbar navbar navbar-inverse navbar-fixed-top">
        <div class="containerBox">
            <div class="navbar-header">
                <a class="navbar-brand logoBox" href="#">监控系统</a>
                <a class="navbar-brand" href="" style="font-size:14px;float:right">
                    <i class="glyphicon glyphicon-off"></i>
                    退出
                </a>
                <a class="navbar-brand" href="" style="font-size:14px;float:right">
                    <i class="glyphicon glyphicon-user"></i>
                    {{ request.user }}
                </a>
            </div>
        </div>
    </nav>
    <div class="monitorContainer">
        <ul  class="nav nav-tabs">
            <li role="presentation"><a href="/monitor/Dashboard/">dashboard</a></li>
            <li role="presentation" class="active"><a href="/monitor/MonitorInfo/">监控信息</a></li>
            <li role="presentation"><a href="/monitor/MonitorManage/">系统配置</a></li>
            <li role="presentation"><a href="#">资源管理</a></li>
            <li role="presentation"><a href="#">变更管理</a></li>
            <li role="presentation"><a href="/monitor/sysconf/user_manage/">用户管理</a></li>
            <li role="presentation"><a href="#">安全检测</a></li>
            <li role="presentation"><a href="#">FAQ</a></li>
        </ul>
        <div class="Content">
            <h4 style="color: #1a78b5;padding: 0 30px;margin: 0;font-size:16px;">故障统计页<a class="backMonitor" href="/monitor/MonitorInfo/">返回</a></h4>
            <div class="row monitorInfoBox" style="position: relative;padding: 15px;min-width:1170px">
                <ul class="list-group pull-right" style="width: 60%;max-width:180px;text-align: center;position: absolute;top:15px;left: 41px;">
                    <li class="list-group-item "><a href="/monitor/MonitorInfo/TroubleList/">故障列表</a></li>
					<li class="list-group-item"><a href="/monitor/MonitorInfo/TroubleGroup/">故障分组</a></li>
                    <li class="list-group-item tabActive"><a >故障统计</a></li>
		    <li class="list-group-item"><a href="/monitor/MonitorInfo/TroubleHistory/">历史故障</a></li>
                </ul>
                <div  style="margin-left: 205px;background: #fff;border:1px solid #f1f1f1;padding:0 10px 30px 10px;">
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="dashboardItem" style="min-height:0!important;">
                                <div class="dashboardItemContent chosenSelect">
                                    <div class="row">
                                        <form method="get">
                                        <div class="col-xs-9 rmt30 text-center">
                                            <div class="row">
                                                <label for="" class="col-xs-3 text-right" style="padding-top: 5px;">
                                                    开始时间：
                                                </label>
                                                 <input class="form_datetime form-control col-xs-4" type="text" name="start_time" placeholder="开始时间" style="width: 150px;color: #0b0b0b"/>
                                                <label for="" class="col-xs-3 text-right" style="padding-top: 5px;">
                                                    结束时间：
                                                </label>
                                                <input class="form_datetime form-control col-xs-4" type="text" name="end_time" placeholder="开始时间" style="width: 150px;color: #0b0b0b"/>
                                            </div>
                                              <script type="text/javascript">
                                                $('.form_datetime').datetimepicker({
                                                    format: 'yyyy-mm-dd hh:ii',
                                                    autoclose: true,
                                                    todayBtn: true,
                                                    todayHighlight: true,
                                                    pickerPosition: "bottom-left",
                                                    language: 'zh-CN'//中文，需要引用zh-CN.js包
                                                });
                                            </script>
                                        </div>
                                        <div class="col-xs-3 rmt30 text-left">
                                            <button class="btn btn-primary" type="submit">查询</button>
                                            <button class="btn" href="/">重置</button>
                                        </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="width: 98%;background: #f1f1f1;height: 30px;margin:30px auto;"></div>
                    <div class="row ">
                        <div class="col-xs-12">
                            <div class="dashboardItem">
                                <div class="dashboardItemTitle">
                                    <span>机房故障统计</span>
                                </div>
                                <div class="dashboardItemContent">
                                     <div id="container" style="width: auto;height:400px;padding-left:10px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="width: 98%;background: #f1f1f1;height: 30px;margin:30px auto;"></div>
                    <div class="row ">
                        <div class="col-xs-12">
                            <div class="dashboardItem">
                                <div class="dashboardItemTitle">
                                    <span>设备故障统计</span>
                                </div>
                                <div class="dashboardItemContent">
                                     <div id="ContainerDevice" style="width: auto;height:400px;padding-left:10px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="width: 98%;background: #f1f1f1;height: 30px;margin:30px auto;"></div>
                    <div class="row ">
                        <div class="col-xs-12">
                            <div class="dashboardItem">
                                <div class="dashboardItemTitle">
                                    <span>分类统计</span>
                                </div>
                                <div class="dashboardItemContent">
                                     <div id="containerclass" style="width: auto;height:400px;padding-left:10px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <a class="backTop"><i class="glyphicon glyphicon-menu-up"></i></a>
</div>
</body>
<script type="text/javascript">
   $(function () {

    $('#container').highcharts({

        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: '机房故障占比分布'
        },
        tooltip: {
           pointFormat: '{point.name}: <b>{point.percentage:.2f}%</b>',  //鼠标放在每个饼图上显示内容。显示 “选项：百分比”
           percentageDecimals: 1
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.point.num +' 条告警'; //在饼图上直接显示 “A:多少人”
                    }
                },
				showInLegend: false
            }
        },
        series: [{
            type: 'pie',
                name: '',              //name，type，data是内置参数。不能自己定义一个参数。
                data: {{ GD|safe }}
        }]
    });
});

</script>

<script type="text/javascript">
    $(function () {
            $('#ContainerDevice').highcharts({

                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: '设备故障占比分布'
                },
                tooltip: {
                    pointFormat: '{point.name}: <b>{point.percentage:.2f}%</b>',  //鼠标放在每个饼图上显示内容。显示 “选项：百分比”
                    percentageDecimals: 1
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',
                            formatter: function () {
                                return '<b>' + this.point.name + '</b>: ' + this.point.num + ' 条告警'; //在饼图上直接显示 “A:多少人”
                            }
                        },
                        showInLegend: false
                    }
                },
                series: [{
                    type: 'pie',
                    name: '',              //name，type，data是内置参数。不能自己定义一个参数。
                    data: {{ hostnames|safe }}
                }]
            });
});

</script>

<script type="text/javascript">
    $(function () {
    $('#containerclass').highcharts({

        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: '故障类型占比分布'
        },
        tooltip: {
           pointFormat: '{point.name}: <b>{point.percentage:.2f}%</b>',  //鼠标放在每个饼图上显示内容。显示 “选项：百分比”
           percentageDecimals: 1
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.point.num +' 条告警'; //在饼图上直接显示 “A:多少人”
                    }
                },
				showInLegend: false
            }
        },
        series: [{
            type: 'pie',
                name: '',              //name，type，data是内置参数。不能自己定义一个参数。
                data: {{ metrics|safe }}
        }]
    });
});

</script>
</html>
